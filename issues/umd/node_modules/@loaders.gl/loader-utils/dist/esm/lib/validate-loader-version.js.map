{"version":3,"sources":["../../../src/lib/validate-loader-version.js"],"names":["assert","VERSION","validateLoaderVersion","loader","coreVersion","loaderVersion","version","parseVersion","parts","split","map","Number","major","minor"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,oBAAnB;AAKA,IAAMC,OAAO,GAAG,mBAAuB,WAAvB,aAAmD,EAAnE;AAGA,OAAO,SAASC,qBAAT,CAA+BC,MAA/B,EAA8D;AAAA,MAAvBC,WAAuB,uEAATH,OAAS;AACnED,EAAAA,MAAM,CAACG,MAAD,EAAS,oBAAT,CAAN;AAEA,MAAIE,aAAa,GAAGF,MAAM,CAACG,OAA3B;;AACA,MAAI,CAACF,WAAD,IAAgB,CAACC,aAArB,EAAoC;AAClC;AACD;;AAEDD,EAAAA,WAAW,GAAGG,YAAY,CAACH,WAAD,CAA1B;AACAC,EAAAA,aAAa,GAAGE,YAAY,CAACF,aAAD,CAA5B;AASD;;AAED,SAASE,YAAT,CAAsBD,OAAtB,EAA+B;AAC7B,MAAME,KAAK,GAAGF,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmBC,GAAnB,CAAuBC,MAAvB,CAAd;AACA,SAAO;AAACC,IAAAA,KAAK,EAAEJ,KAAK,CAAC,CAAD,CAAb;AAAkBK,IAAAA,KAAK,EAAEL,KAAK,CAAC,CAAD;AAA9B,GAAP;AACD","sourcesContent":["import assert from './env-utils/assert';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : '';\n\n// Returns `true` if the two versions are compatible\nexport function validateLoaderVersion(loader, coreVersion = VERSION) {\n  assert(loader, 'no loader provided');\n\n  let loaderVersion = loader.version;\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n\n  // TODO enable when fix the __version__ injection\n  // assert(\n  //   coreVersion.major === loaderVersion.major && coreVersion.minor <= loaderVersion.minor,\n  //   `loader: ${loader.name} is not compatible. ${coreVersion.major}.${\n  //     coreVersion.minor\n  //   }+ is required.`\n  // );\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {major: parts[0], minor: parts[1]};\n}\n"],"file":"validate-loader-version.js"}