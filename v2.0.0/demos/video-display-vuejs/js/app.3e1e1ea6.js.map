{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Video.vue?e304","webpack:///./src/components/Map.vue?4789","webpack:///./src/App.vue?5ee5","webpack:///./src/components/Map.vue?dfef","webpack:////mnt/windows_data/OSH/osh-js/source/osh/utils/Utils.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/events/EventMap.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/events/EventManager.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/ui/view/View.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/ui/view/map/LeafletView.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/dataconnector/DataConnector.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/dataconnector/WebSocketConnector.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/dataconnector/Ajax.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/datareceiver/DataSource.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/datareceiver/SweJson.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/ui/styler/Styler.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/ui/styler/PointMarker.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue?9397","webpack:///./src/components/Video.vue?398a","webpack:////mnt/windows_data/OSH/osh-js/source/osh/datareceiver/VideoMjpeg.js","webpack:////mnt/windows_data/OSH/osh-js/source/osh/ui/view/video/MjpegView.js","webpack:///src/components/Video.vue","webpack:///./src/components/Video.vue?a75c","webpack:///./src/components/Video.vue?0df2","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/components/Video.vue?aceb"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","Math","pow","isDefined","v","hasValue","assertDefined","letName","assertType","expectedType","assertString","assertNumber","assertPositive","assertObject","assertArray","Array","isArray","assertFunction","randomUUID","replace","random","toString","isWebWorker","Worker","EventMap","eventMap","eventName","id","filter","obj","fnCallback","fn","properties","fnCallbackArr","EventManager","remove","removeById","view","registerCallback","unregisterCallback","fire","observe","divId","elem","document","getElementById","addEventListener","DATA","SYNC_DATA","SELECT_VIEW","SHOW_VIEW","CONNECT_DATASOURCE","DISCONNECT_DATASOURCE","DATASOURCE_UPDATE_TIME","CURRENT_MASTER_TIME","UAV_TAKEOFF","UAV_GOTO","UAV_LOOKAT","UAV_LAND","UAV_ORBIT","LOADING_START","LOADING_STOP","ADD_VIEW_ITEM","RESIZE","PTZ_SEND_REQUEST","View","parentElementDivId","viewItems","options","stylers","names","stylerToObj","stylerIdToStyler","lastRec","selectedDataSources","dataSources","entity","dataSourceId","css","cssSelected","init","elementDiv","createElement","setAttribute","div","appendChild","container","body","hide","beforeAddingItems","addViewItem","show","style","display","handleEvents","that","observer","MutationObserver","mutations","forEach","mutation","attributeName","onResize","attributes","rootObserver","disconnect","destroy","childList","getEventName","event","reset","setData","EVENT","parentNode","removeChild","viewItem","styler","getId","ds","getDataSourcesIds","self","selected","selectedEntity","entityId","indexOf","dataSourcesIds","includes","dataSourceToStylerMap","currentViewItem","currentStyler","removeViewItem","selectDataView","viewId","res","concat","LeafletView","cssClass","className","initMap","initialView","location","L","LatLng","zoom","first","follow","autoZoomOnFirstMarker","defaultLayers","getDefaultLayers","defaultLayer","layer","baseLayers","overlays","lat","lon","overlayLayers","map","Map","fullscreenControl","layers","control","addTo","setView","markers","polylines","maxZoom","mbAttr","mbUrl","esriLink","esriWholink","esriLayer","tileLayer","attribution","maxNativeZoom","streets","osmUrl","osmAttrib","osm","minZoom","addLayer","marker","icon","markerIcon","iconAnchor","iconUrl","label","bindTooltip","permanent","direction","offset","point","labelOffset","desc","description","bindPopup","setRotationAngle","orientation","_icon","on","stylerId","markerId","removeLayer","polylinePoints","locations","y","x","polyline","Polyline","color","weight","opacity","smoothFactor","addMarker","heading","labelColor","labelSize","isNaN","newLatLng","setLatLng","markerBounds","latLngBounds","fitBounds","zoomLevel","setIcon","polylineId","addPolyline","maxPoints","parentElement","invalidateSize","setTimeout","extend","openPopup","popup","_popup","proto_initIcon","Marker","_initIcon","proto_setPos","_setPos","oldIE","DomUtil","TRANSFORM","addInitHook","rotationOrigin","rotationAngle","include","pos","angle","update","setRotationOrigin","origin","DataConnector","url","reconnectTimeout","timeout","WebSocketConnector","blobURL","URL","createObjectURL","Blob","ws","WebSocket","binaryType","onmessage","byteLength","postMessage","onerror","console","error","close","readyState","OPEN","e","type","interval","lastTimestamp","getUrl","worker","Date","now","onMessage","setInterval","currentTimestamp","delta","warn","reconnect","fullDisconnect","removeInterval","terminate","clearInterval","onReconnect","connect","Ajax","method","responseType","request","extraUrl","xmlhttp","XMLHttpRequest","open","onload","oEvent","response","ontimeout","log","send","setRequestHeader","onreadystatechange","status","onSuccess","responseText","onError","sendRequest","DataSource","timeShift","connected","initDataSource","lastTimeStamp","lastStartTime","syncMasterTime","bufferingTime","timeOut","protocol","startsWith","connector","buildUrl","startTime","toISOString","setUrl","onData","timeStamp","parseTimeStamp","parseData","getTime","endpointUrl","service","offeringID","foiURN","observedProperty","endTime","replaySpeed","responseFormat","setReconnectTimeout","SweJson","rec","String","fromCharCode","Uint8Array","JSON","parse","Styler","jsonProperties","initEvents","funcName","func","isSet","dataSourceIds","handler","clear","fnArr","PointMarker","iconSize","defaultToTerrainElevation","checkFn","locationFunc","addFn","orientationFunc","iconFunc","labelFunc","labelColorFunc","labelSizeFunc","updateMarker","components","mounted","methods","gpsDataSource","z","alt","component","width","top","left","VideoMjpeg","DataView","getFloat64","imgBlob","revokeObjectURL","MjpegView","showTime","imgTag","rotation","PI","canvas","height","ctx","getContext","translate","rotate","observeDiv","oldBlobURL","src","innerHTML","DialogDrag","videoDataSource","keepRatio","Video","Vue","use","LoadScript","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.3e1e1ea6.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://opensensorhub.github.io/osh-js/v2.0.0/demos/video-display-vuejs/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=1&id=62391638&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=1&id=62391638&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Video'),_c('Map')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\",attrs:{\"id\":\"leafletMap\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/** * @module Utils */\n\n/** Maximum value of a long */\nexport const MAX_LONG = Math.pow(2, 53) + 1;\n\n/**\n * Global helper method to test if a letiable or object attribute is defined\n */\nexport function isDefined(v) {\n    return typeof (v) !== 'undefined' && v !== null;\n}\n\n\n/**\n Global helper method to test if a letiable or object attribute has a value,\n that is it is defined and non null\n */\nexport function hasValue(v) {\n    return isDefined(v) && v !== null;\n}\n\n/**\n Global helper method to test if a letiable or object attribute is of a particular type\n */\nexport function hasType(v, expectedType) {\n    let hasVal = hasValue(v);\n    return hasVal && typeof (v) === expectedType;\n}\n\n/**\n Global helper method to test if a letiable or object attribute is an object\n */\nexport function isObject(v, letName) {\n    return hasType(v, 'object', letName);\n}\n\n/**\n Global helper method to test if a letiable or object attribute is an array\n */\nexport function isArray(v) {\n    return isDefined(v) && Array.isArray(v);\n}\n\n/**\n Global helper method to test if a letiable or object attribute is a function\n */\nexport function isFunction(v, letName) {\n    return hasType(v, 'function', letName);\n}\n\n/**\n Assert that a letiable or object attribute is defined\n **/\nexport function assertDefined(v, letName = 'letiable') {\n    if (!isDefined(v)) {\n        throw letName + \" must be defined\";\n    }\n    return v;\n}\n\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\nexport function assertType(v, expectedType, letName = 'letiable') {\n    assertDefined(v, letName);\n    if (typeof (v) !== expectedType) {\n        throw letName + \" must be of type \" + expectedType;\n    }\n    return v;\n}\n\n/**\n Assert that a letiable or object attribute is a string\n **/\nexport function assertBoolean(v, letName) {\n    return assertType(v, 'boolean', letName);\n}\n\n/**\n Assert that a letiable or object attribute is a string\n **/\nexport function assertString(v, letName) {\n    return assertType(v, 'string', letName);\n}\n\n/**\n Assert that a letiable or object attribute is a number\n **/\nexport function assertNumber(v, letName) {\n    return assertType(v, 'number', letName);\n}\n\n/**\n Assert that a letiable or object attribute is a number\n **/\nexport function assertPositive(v, letName) {\n    assertNumber(v, letName);\n    if (v <= 0) {\n        throw letName + \" must be a positive number\";\n    }\n}\n\n/**\n Assert that a letiable or object attribute is an object\n **/\nexport function assertObject(v, letName) {\n    return assertType(v, 'object', letName);\n}\n\n/**\n Assert that a letiable or object attribute is an object\n **/\nexport function assertArray(v, letName = 'letiable') {\n    assertDefined(v, letName);\n    if (!Array.isArray(v)) {\n        throw letName + \" must be an array\";\n    }\n    return v;\n}\n\n/**\n Assert that a letiable or object attribute is a function\n **/\nexport function assertFunction(v, letName) {\n    return assertType(v, 'function', letName);\n}\n\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\nexport function assertHasValue(v, letName = 'letiable') {\n    assertDefined(v, letName);\n    if (!hasValue(v)) {\n        throw letName + \" must not be null\";\n    }\n    return v;\n}\n\n/**\n *\n * @return {String}\n */\nexport function randomUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        let r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\n/**\n * This function stamps/embeds a UUID into an object and returns the UUID generated for it\n * @return {String}\n */\nexport function stampUUID(obj) {\n    obj._osh_id = obj._osh_id || randomUUID();\n    return obj._osh_id;\n}\n\n//buffer is an ArrayBuffer object, the offset if specified in bytes, and the type is a string\n//corresponding to an OGC data type.\n//See http://def.seegrid.csiro.au/sissvoc/ogc-def/resource?uri=http://www.opengis.net/def/dataType/OGC/0/\n/**\n *\n * @param buffer\n * @param offset\n * @param type\n * @return {*}\n */\nexport function ParseBytes(buffer, offset, type) {\n    let view = new DataView(buffer);\n\n    //Note: There exist types not listed in the map below that have OGC definitions, but no appropriate\n    //methods or corresponding types available for parsing in javascript. They are float128, float16, signedLong,\n    //and unsignedLong\n    let typeMap = {\n        double: function (offset) {\n            return {val: view.getFloat64(offset), bytes: 8};\n        },\n        float64: function (offset) {\n            return {val: view.getFloat64(offset), bytes: 8};\n        },\n        float32: function (offset) {\n            return {val: view.getFloat32(offset), bytes: 4};\n        },\n        signedByte: function (offset) {\n            return {val: view.getInt8(offset), bytes: 1};\n        },\n        signedInt: function (offset) {\n            return {val: view.getInt32(offset), bytes: 4};\n        },\n        signedShort: function (offset) {\n            return {val: view.getInt16(offset), bytes: 2};\n        },\n        unsignedByte: function (offset) {\n            return {val: view.getUint8(offset), bytes: 1};\n        },\n        unsignedInt: function (offset) {\n            return {val: view.getUint32(offset), bytes: 4};\n        },\n        unsignedShort: function (offset) {\n            return {val: view.getUint16(offset), bytes: 2};\n        },\n        //TODO: string-utf-8:\n    };\n    return typeMap[type](offset);\n}\n\n//This function recursivley iterates over the resultStructure to fill in\n//values read from data which should be an ArrayBuffer containing the payload from a websocket\n/**\n *\n * @param struct\n * @param data\n * @param offsetBytes\n * @return {*}\n */\nexport function ReadData(struct, data, offsetBytes) {\n    let offset = offsetBytes;\n    for (let i = 0; i < struct.fields.length; i++) {\n        let currFieldStruct = struct.fields[i];\n        if (isDefined(currFieldStruct.type) && currFieldStruct.type !== null) {\n            let ret = ParseBytes(data, offset, currFieldStruct.type);\n            currFieldStruct.val = ret.val;\n            offset += ret.bytes;\n        } else if (isDefined(currFieldStruct.count) && currFieldStruct.count !== null) {\n            //check if count is a reference to another letiable\n            if (isNaN(currFieldStruct.count)) {\n                let id = currFieldStruct.count;\n                let fieldName = struct.id2FieldMap[id];\n                currFieldStruct.count = struct.findFieldByName(fieldName).val;\n            }\n            for (let c = 0; c < currFieldStruct.count; c++) {\n                for (let j = 0; j < currFieldStruct.fields.length; j++) {\n                    let field = JSON.parse(JSON.stringify(currFieldStruct.fields[j]));\n                    offset = ReadData(field, data, offset);\n                    currFieldStruct.val.push(field);\n                }\n            }\n        }\n    }\n    return offset;\n}\n\n/**\n *\n * @param resultStructure\n * @return {{}}\n */\nexport function GetResultObject(resultStructure) {\n    //TODO: handle cases for nested arrays / matrix data types\n    let result = {};\n    for (let i = 0; i < resultStructure.fields.length; i++) {\n        if (isDefined(resultStructure.fields[i].count)) {\n            result[resultStructure.fields[i].name] = [];\n            for (let c = 0; c < resultStructure.fields[i].count; c++) {\n                let item = {};\n                for (let k = 0; k < resultStructure.fields[i].val[c].fields.length; k++) {\n                    item[resultStructure.fields[i].val[c].fields[k].name] = resultStructure.fields[i].val[c].fields[k].val;\n                }\n                result[resultStructure.fields[i].name].push(item);\n            }\n        } else {\n            result[resultStructure.fields[i].name] = resultStructure.fields[i].val;\n        }\n    }\n    return result;\n}\n\n/**\n *\n * @return {boolean}\n */\nexport function isOpera() {\n    return (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n}\n\n/**\n *\n * @return {boolean}\n */\nexport function isFirefox() {\n    return typeof InstallTrigger !== 'undefined';\n}\n\n/**\n *\n * @return {boolean}\n */\nexport function isSafari() {\n    return Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n}\n\n/**\n *\n * @return {boolean}\n */\nexport function isChrome() {\n    return !!window.chrome && !!window.chrome.webstore;\n}\n\n/**\n *\n * @return {*|boolean}\n */\nexport function isBlink() {\n    return (isChrome || isOpera) && !!window.CSS;\n}\n\n/**\n *\n * @param a\n * @param b\n * @return {boolean}\n */\nexport function isArrayIntersect(a, b) {\n    return a.filter(function (element) {\n        return b.indexOf(element) > -1;\n    }).length > 0;\n}\n\n\n/**\n *\n * @param o\n * @return {boolean}\n */\nexport function isElement(o) {\n    return (\n      typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n        o && typeof o === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName === \"string\"\n    );\n}\n\n/**\n *\n * @return {*}\n */\nexport function isWebWorker() {\n    return isDefined(Worker);\n}\n\n/**\n *\n * @param div\n */\nexport function takeScreenShot(div) {\n}\n\n/**\n * Remove a css class from a the div given as argument.\n * @param div the div to remove the class from\n * @param css the css class to remove\n */\nexport function removeCss(div, css) {\n    let divCss = div.className;\n    css = divCss.replace(css, \"\");\n    div.className = css;\n}\n\n\n/**\n * Add a css class to a the div given as argument.\n * @param div the div to add the class to\n * @param css the css class to add\n */\nexport function addCss(div, css) {\n    div.setAttribute(\"class\", div.className + \" \" + css);\n}\n\n/**\n * Removes the last character of a {string} object.\n * @param {string} value - The input {string}\n * @return {string} The value without the last character\n */\nexport function removeLastCharIfExist(value) {\n    if (!isDefined(undefined) || value === null || value.length === 0 || !value.endsWith(\"/\")) {\n        return value;\n    }\n\n    return value.substring(0, value.length - 1);\n}\n\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport {isDefined} from '../utils/Utils.js';\n\n/**\n * This class is responsible for observing and firing events. It used an object as backed data structure.\n */\nclass EventMap {\n\n    constructor() {\n        this.eventMap = {};\n    }\n\n    remove(eventName, id) {\n        if(eventName in this.eventMap) {\n            this.eventMap[eventName] = this.eventMap[eventName].filter(obj => obj.id !== id);\n        }\n    }\n\n    removeById(id) {\n        for(let eventName in this.eventMap) {\n            this.eventMap[eventName] = this.eventMap[eventName].filter(obj => obj.id !== id);\n        }\n    }\n\n    /**\n     * Observes any eventName and calls the callback when the event is fired.\n     * @param {String} eventName -\n     * @param {Function} fnCallback -\n     * @param {String} id - id of the div to observe\n     */\n    observe(eventName, fnCallback, id = 'any') {\n        if(!isDefined(eventName) || !isDefined(fnCallback) || !isDefined(id)) {\n            return;\n        }\n        if(!(eventName in this.eventMap)) {\n            this.eventMap[eventName] = [];\n        }\n        this.eventMap[eventName].push({\n            fn: fnCallback,\n            id: id\n        });\n    }\n\n    /**\n     * Fires an event\n     * @param {String} eventName -\n     * @param {Object} properties -\n     */\n    fire(eventName, properties) {\n        if(!isDefined(eventName)) {\n            return;\n        }\n        if(eventName in this.eventMap) {\n            let fnCallbackArr = this.eventMap[eventName];\n            for(let i = 0; i < fnCallbackArr.length;i++){\n                // callback the properties to the current callback\n                fnCallbackArr[i].fn(properties);\n            }\n        }\n    }\n}\nexport default EventMap;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport EventMap from './EventMap.js';\n\nconst eventMap = new EventMap();\n\n/**\n * This class is response for handling events and acts as an event bus.\n */\nclass EventManager {\n\n    static remove(eventName, id ='any') {\n        eventMap.remove('osh:' + eventName, id);\n    }\n\n    static removeById(id ='any') {\n        eventMap.removeById(id);\n    }\n\n    static registerView(view) {\n        view.registerCallback();\n    }\n\n    static unregisterView(view) {\n        view.unregisterCallback();\n    }\n\n    /**\n     * Fires an event\n     * @param {String} eventName -\n     * @param {Object} properties -\n     */\n    static fire(eventName, properties) {\n        properties.name = eventName;\n        eventMap.fire('osh:' + eventName, properties);\n    }\n\n    /**\n     * Observes any eventName and calls the callback when the event is fired.\n     * @param {String} eventName -\n     * @param {Function} fnCallback -\n     */\n    static observe(eventName, fnCallback, id = 'any') {\n        eventMap.observe('osh:' + eventName, fnCallback, id);\n    }\n\n    /**\n     * Observes eventName attached to a div element  and calls the callback when the event is fired.\n     * @param {String} divId -\n     * @param {String} eventName -\n     * @param {Function} fnCallback -\n     */\n    static observeDiv(divId, eventName, fnCallback) {\n        let elem = document.getElementById(divId);\n        // use native dom event listener\n        elem.addEventListener(eventName, fnCallback);\n    }\n\n    /**\n     * This part defines the events used INTO the API\n     * @const\n     * @type {{DATA: string, SYNC_DATA: string, SELECT_VIEW: string, CONTEXT_MENU: string, SHOW_VIEW: string, CONNECT_DATASOURCE: string, DISCONNECT_DATASOURCE: string, DATASOURCE_UPDATE_TIME: string, CURRENT_MASTER_TIME: string, UAV_TAKEOFF: string, UAV_GOTO: string, UAV_LOOKAT: string, UAV_LAND: string, UAV_ORBIT: string, LOADING_START: string, LOADING_STOP: string, ADD_VIEW_ITEM: string}}\n     */\n    static get EVENT() {\n        return {\n            DATA: \"data\",\n            SYNC_DATA: \"syncData\",\n            SELECT_VIEW: \"selectView\",\n            SHOW_VIEW: \"showView\",\n            CONNECT_DATASOURCE: \"connectDataSource\",\n            DISCONNECT_DATASOURCE: \"disconnectDataSource\",\n            DATASOURCE_UPDATE_TIME: \"updateDataSourceTime\",\n            CURRENT_MASTER_TIME: \"currentMasterTime\",\n            UAV_TAKEOFF: \"uav:takeoff\",\n            UAV_GOTO: \"uav:goto\",\n            UAV_LOOKAT: \"uav:lookat\",\n            UAV_LAND: \"uav:land\",\n            UAV_ORBIT: \"uav:orbit\",\n            LOADING_START: \"loading:start\",\n            LOADING_STOP: \"loading:stop\",\n            ADD_VIEW_ITEM: \"addViewItem\",\n            RESIZE: \"resize\",\n            PTZ_SEND_REQUEST: \"ptzSendRequest\"\n        };\n    }\n}\n\nexport default EventManager;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * The abstract object to represent a view.\n * @param {Object} parentElementDivId - The parent html element div id to attach/or create the view.\n * @param {String} viewItems - The list of view items\n * @param {String} options - The options\n */\nimport {isDefined, randomUUID} from '../../utils/Utils.js';\nimport EventManager from '../../events/EventManager.js';\nimport '../../resources/css/view.css';\n\nclass View {\n    /**\n     * Create a View.\n     * @param {String} parentElementDivId - The div element to attach to\n     * @param {Object[]} viewItems - The initial view items to add\n     * @param {String} viewItems.name - The name of the view item\n     * @param {Styler} viewItems.styler - The styler object representing the view item\n     * @param {Object} options - the properties of the view\n     * @param {String} options.dataSourceId - The dataSource id of the dataSource providing data to the view\n     * @param {Entity} options.entity - The entity to which the view belongs to\n     */\n    constructor(parentElementDivId, viewItems, options) {\n        // list of stylers\n        /** @protected @const {!Styler} */\n        this.stylers = [];\n        this.viewItems = [];\n        /** @protected @const {!String[]} */\n        this.names = {};\n        this.stylerToObj = {};\n        this.stylerIdToStyler = {};\n        this.lastRec = {};\n        this.selectedDataSources = [];\n        this.dataSources = [];\n\n        //this.divId = divId;\n        this.id = \"view-\" + randomUUID();\n\n        /** @protected {!Entity} */\n        this.entity = null;\n\n        this.dataSourceId = -1;\n        // sets dataSourceId\n        if (isDefined(options) && isDefined(options.dataSourceId)) {\n            this.dataSourceId = options.dataSourceId;\n        }\n\n        if (isDefined(options) && isDefined(options.entity)) {\n            this.entity = options.entity;\n        }\n        this.css = \"\";\n\n        this.cssSelected = \"\";\n\n        if (isDefined(options) && isDefined(options.css)) {\n            this.css = options.css;\n        }\n\n        if (isDefined(options) && isDefined(options.cssSelected)) {\n            this.cssSelected = options.cssSelected;\n        }\n\n        // inits the view before adding the viewItem\n        this.init(parentElementDivId, viewItems, options);\n    }\n\n    /**\n     * Inits the view component.\n     * @param parentElementDivId The parent html element object to attach/create the view\n     * @param viewItems the list of items to add\n     * @param options [TODO]\n     * @memberof View\n     */\n    init(parentElementDivId, viewItems, options) {\n        this.elementDiv = document.createElement(\"div\");\n        this.elementDiv.setAttribute(\"id\", this.id);\n        this.elementDiv.setAttribute(\"class\", this.css+\" osh-view\");\n        this.divId = this.id;\n\n        let div = document.getElementById(parentElementDivId);\n\n        if (!isDefined(div) || div === null) {\n            document.body.appendChild(this.elementDiv);\n            this.hide();\n            this.container = document.body;\n        } else {\n            div.appendChild(this.elementDiv);\n            this.container = div;\n        }\n\n        this.beforeAddingItems(options);\n\n        if (isDefined(viewItems)) {\n            for (let i = 0; i < viewItems.length; i++) {\n                this.addViewItem(viewItems[i]);\n            }\n        }\n\n        if (isDefined(options)) {\n            if (isDefined(options.show)) {\n                document.getElementById(this.divId).style.display = (options.show) ? \"block\" : \"none\";\n            }\n        }\n        this.handleEvents();\n\n        var that = this;\n        // observes the event associated to the dataSourceId\n        if (isDefined(options) && isDefined(options.dataSourceId)) {\n            this.registerCallback();\n        }\n\n        let observer = new MutationObserver((mutations) => {\n            mutations.forEach(function (mutation) {\n                // Was it the style attribute that changed? (Maybe a classname or other attribute change could do this too? You might want to remove the attribute condition) Is display set to 'none'?\n                if (mutation.attributeName === 'style') {\n                    that.onResize();\n                }\n            });\n        });\n        // Attach the mutation observer to blocker, and only when attribute values change\n        observer.observe(this.elementDiv, {attributes: true});\n\n        const rootObserver = new MutationObserver(function(mutations) {\n            // try to get the div element by the id to check if it is still owned by the document object\n            if(!isDefined(document.getElementById(that.divId))){\n                this.disconnect();\n                that.destroy();\n            }\n        });\n        rootObserver.observe(document.body, {\n            childList: true,\n        });\n    }\n\n    registerCallback() {\n        EventManager.observe(this.getEventName(), (event) => {\n            if (event.reset) {\n                this.reset(); // on data stream reset\n            } else {\n                this.setData(this.dataSourceId, event.data);\n            }\n        }, this.divId);\n    }\n\n    /**\n     * @private\n     */\n    unregisterCallback() {\n        EventManager.removeById(this.divId);\n    }\n\n    getEventName() {\n        return EventManager.EVENT.DATA + \"-\" + this.dataSourceId;\n    }\n\n    /**\n     * Hide the view\n     */\n    hide() {\n        this.elementDiv.style.display = \"none\";\n    }\n\n    /**\n     * Callback called when the view is resized\n     * @event\n     */\n    onResize() {\n    }\n\n    /**\n     * Attach the view to a specific div. If the view has already been attached to a div, it will be removed\n     * from its current parent and will be attached to new one.\n     * Note: the onResize() is called at the end of the process.\n     * @param {String} divId - The div element to attach to\n     */\n    attachTo(divId) {\n        if (isDefined(this.elementDiv.parentNode)) {\n            // detach from its parent\n            this.elementDiv.parentNode.removeChild(this.elementDiv);\n        }\n        document.getElementById(divId).appendChild(this.elementDiv);\n        if (this.elementDiv.style.display === \"none\") {\n            this.elementDiv.style.display = \"block\";\n        }\n\n        this.onResize();\n    }\n\n    /**\n     * This method is called before attaching any view items passed as arguments in the constructor of the view.\n     * @event\n     * @param {Object} options - A generic object to use\n     */\n    beforeAddingItems(options) {\n\n    }\n\n    /**\n     * Gets the inner id of the view object.\n     * @return {String} The id of the view\n     */\n    getId() {\n        return this.id;\n    }\n\n    /**\n     * Gets the div id of the DOM element.\n     * @return {String} The div id of the view\n     */\n    getDivId() {\n        return this.divId;\n    }\n\n    /**\n     * Set the data to the view. Each view has to handle the kind of the data separately.\n     * @param {String} dataSourceId - The dataSource id of the source providing the data\n     * @param {*} data - The data to set\n     */\n    setData(dataSourceId, data) {\n    }\n\n    /**\n     * Show the view.\n     * @param  {Object} properties - A generic object\n     */\n    show(properties) {\n    }\n\n    destroy()  {\n        this.unregisterCallback();\n    }\n    /**\n     * Adds a viewItem to the view. The EventManager.EVENT.DATA and EventManager.EVENT.SELECT_VIEW are then observed using the\n     * dataSource(s) contained into the styler.\n     * @param {Object} viewItem - The initial view items to add\n     * @param {String} viewItem.name - The name of the view item\n     * @param {Styler} viewItem.styler - The styler object representing the view item\n     */\n    addViewItem(viewItem) {\n        this.viewItems.push(viewItem);\n        if (viewItem.hasOwnProperty(\"styler\")) {\n            let styler = viewItem.styler;\n            this.stylers.push(styler);\n            if (viewItem.hasOwnProperty(\"name\")) {\n                this.names[styler.getId()] = viewItem.name;\n            }\n            styler.viewItem = viewItem;\n            styler.init(this);\n            this.stylerIdToStyler[styler.id] = styler;\n            //for(let dataSourceId in styler.dataSourceToStylerMap) {\n            let ds = styler.getDataSourcesIds();\n            for (let i = 0; i < ds.length; i++) {\n                const dataSourceId = ds[i];\n                // observes the data come in\n                let self = this;\n                // see https://www.pluralsight.com/guides/javascript-callbacks-variable-scope-problem\n                EventManager.observe(EventManager.EVENT.DATA + \"-\" + dataSourceId, (event) => {\n\n                    // skip data reset events for now\n                    if (event.reset) {\n                        return;\n                    }\n\n                    // we check selected dataSource only when the selected entity is not set\n                    let selected = false;\n                    if (isDefined(self.selectedEntity)) {\n                        selected = (viewItem.entityId === self.selectedEntity);\n                    } else {\n                        selected = (self.selectedDataSources.indexOf(dataSourceId) > -1);\n                    }\n\n                    //TODO: maybe done into the styler?\n                    styler.setData(dataSourceId, event.data, self, {\n                        selected: selected\n                    });\n                    self.lastRec[dataSourceId] = event.data;\n                }, this.divId);\n\n                EventManager.observe(EventManager.EVENT.SELECT_VIEW, (event) => {\n                    // we check selected dataSource only when the selected entity is not set\n                    let selected = false;\n                    if (isDefined(event.entityId)) {\n                        selected = (viewItem.entityId === event.entityId);\n                    } else {\n                        selected = (event.dataSourcesIds.indexOf(dataSourceId) > -1);\n                    }\n\n                    if (dataSourceId in self.lastRec) {\n                        styler.setData(dataSourceId, self.lastRec[dataSourceId], self, {\n                            selected: selected\n                        });\n                    }\n                }, this.divId);\n\n            }\n        }\n    }\n\n    /**\n     * Removes a view item from the view.\n     * @param {Object} viewItem - The initial view items to add\n     * @param {String} viewItem.name - The name of the view item\n     * @param {Styler} viewItem.styler - The styler object representing the view item\n     */\n    removeViewItem(viewItem) {\n        if(this.viewItems.includes(viewItem)) {\n            // 1) remove from STYLER fn\n            for(let ds in viewItem.styler.dataSourceToStylerMap) {\n                EventManager.remove(EventManager.EVENT.DATA + \"-\" + ds, this.divId);\n                delete this.lastRec[ds];\n            }\n            this.viewItems = this.viewItems.filter(currentViewItem => currentViewItem !== viewItem);\n        }\n        delete this.stylerIdToStyler[viewItem.styler.id]\n        this.stylers = this.stylers.filter(currentStyler => currentStyler.id !== viewItem.styler.id);\n        delete this.names[viewItem.styler.id];\n        delete this.stylerToObj[viewItem.styler.id]\n    }\n\n    /**\n     * Removes all view item from the view.\n     */\n    removeViewItems() {\n        for(const viewItem of this.viewItems) {\n            this.removeViewItem(viewItem);\n        }\n    }\n\n    /**\n     * @private\n     */\n    handleEvents() {\n        var that = this;\n        // observes the selected event\n        EventManager.observe(EventManager.EVENT.SELECT_VIEW, (event) =>\n            that.selectDataView(event.dataSourcesIds, event.entityId),this.divId);\n\n        // observes the SHOW event\n        EventManager.observe(EventManager.EVENT.SHOW_VIEW, (event) => that.show(event),this.divId);\n\n        EventManager.observe(EventManager.EVENT.ADD_VIEW_ITEM, (event) => {\n            if (isDefined(event.viewId) && event.viewId === that.id) {\n                that.addViewItem(event.viewItem);\n            }\n        },this.divId);\n\n        EventManager.observe(EventManager.EVENT.RESIZE + \"-\" + this.divId, (event) =>\n            that.onResize(),this.divId);\n    }\n\n    /**\n     * Selects the view by setting the current selected entity and dataSource.\n     * @param  {String} dataSourcesIds - The dataSource id\n     * @param {String} entityId - The entity id\n     */\n    selectDataView(dataSourcesIds, entityId) {\n        if (isDefined(this.dataSources)) {\n            this.selectedDataSources = dataSourcesIds;\n            // set the selected entity even if it is undefined\n            // this is handled by the setData function\n            this.selectedEntity = entityId;\n            for (let j = 0; j < this.dataSources.length; j++) {\n                this.setData(this.dataSources[j], this.lastRec[this.dataSources[j]]);\n            }\n        }\n    }\n\n    /**\n     * Gets the list of the dataSource ids contained into the view.\n     * @return {String[]} The list of dataSource ids\n     */\n    getDataSourcesId() {\n        let res = [];\n        if (this.dataSourceId !== -1) {\n            res.push(this.dataSourceId);\n        }\n\n        // check for stylers\n        for (let i = 0; i < this.viewItems.length; i++) {\n            let viewItem = this.viewItems[i];\n            if (viewItem.hasOwnProperty(\"styler\")) {\n                let styler = viewItem.styler;\n                res = res.concat(styler.getDataSourcesIds());\n            }\n        }\n\n        return res;\n    }\n\n    /**\n     * Calls for resetting the view.\n     */\n    reset() {\n    }\n}\n\nexport default View;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport View from \"../View.js\";\nimport {isDefined, randomUUID} from \"../../../utils/Utils.js\";\nimport EventManager from \"../../../events/EventManager.js\";\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n/**\n * This class is in charge of displaying GPS/orientation data by adding a marker to the Leaflet Map object.\n * @extends View\n * @example\n\n import LeafletView from 'osh/ui/view/map/LeafletView.js';\n\n let leafletMapView = new LeafletView(\"\",\n [{\n            styler :  pointMarker,\n            name : \"Android Phone GPS\",\n            entityId : androidEntity.id\n        },\n {\n     styler : new Polyline({\n         locationFunc : {\n             dataSourceIds : [androidPhoneGpsDataSource.getId()],\n             handler : function(rec) {\n                 return {\n                     x : rec.lon,\n                     y : rec.lat,\n                     z : rec.alt\n                 };\n             }\n         },\n         color : 'rgba(0,0,255,0.5)',\n         weight : 10,\n         opacity : .5,\n         smoothFactor : 1,\n         maxPoints : 200\n     }),\n     name : \"Android Phone GPS Path\",\n     entityId : androidEntity.id\n }]\n );\n */\nclass LeafletView extends View {\n    /**\n     * Create a View.\n     * @param {String} parentElementDivId - The div element to attach to\n     * @param {Object[]} viewItems - The initial view items to add\n     * @param {String} viewItems.name - The name of the view item\n     * @param {Styler} viewItems.styler - The styler object representing the view item\n     * @param {Object} options - the properties of the view\n     * @param {Boolean} options.autoZoomOnFirstMarker - auto zoom on the first added marker\n     * @param {Boolean} options.follow - follow the marker\n     * @param {Object} options.initialView - {lon:.., lat:..}\n     * @param {Object[]} options.overlayLayers - OpenLayers objects to use as overlay layer\n     * @param {Object[]} options.baseLayers - OpenLayers objects to use as base layer\n     *\n     */\n    constructor(parentElementDivId, viewItems, options) {\n        super(parentElementDivId, viewItems, options);\n\n        let cssClass = document.getElementById(this.divId).className;\n        document.getElementById(this.divId).setAttribute(\"class\", cssClass+\" \"+this.css);\n    }\n\n    beforeAddingItems(options) {\n        // inits the map\n        this.initMap(options);\n    }\n\n    //---------- MAP SETUP --------------//\n    /**\n     *\n     * @private\n     */\n    initMap(options) {\n        let initialView = {\n            location: new L.LatLng(0, 0),\n            zoom: 3\n        };\n        this.first = true;\n        this.follow = false;\n        this.autoZoomOnFirstMarker = false;\n        let defaultLayers = this.getDefaultLayers();\n\n        let defaultLayer = defaultLayers[0].layer;\n\n        let baseLayers = {};\n        let overlays = {};\n\n        baseLayers[defaultLayers[0].name] = defaultLayers[0].layer;\n        overlays[defaultLayers[1].name] = defaultLayers[1].layer;\n\n        if (isDefined(options)) {\n            if (isDefined(options.initialView)) {\n                initialView = {\n                    location: new L.LatLng(options.initialView.lat, options.initialView.lon),\n                    zoom: options.initialView.zoom\n                };\n            }\n            // checks autoZoom\n            if (isDefined(options.autoZoomOnFirstMarker)) {\n                this.autoZoomOnFirstMarker = options.autoZoomOnFirstMarker;\n            }\n\n            // checks overlayers\n            if (isDefined(options.overlayLayers)) {\n                overlays = options.overlayLayers;\n            }\n\n            // checks baseLayer\n            if (isDefined(options.baseLayers)) {\n                baseLayers = options.baseLayers;\n            }\n\n            if (isDefined(options.follow)) {\n                this.follow = options.follow;\n            }\n\n            // checks defaultLayer\n            if (isDefined(options.defaultLayer)) {\n                defaultLayer = options.defaultLayer;\n            }\n        }\n\n        // sets layers to map\n        this.map = new L.Map(this.divId, {\n            fullscreenControl: true,\n            layers: defaultLayer\n        });\n\n        L.control.layers(baseLayers, overlays).addTo(this.map);\n\n        this.map.setView(initialView.location, initialView.zoom);\n\n        //this.initLayers();\n        this.markers = {};\n        this.polylines = {};\n\n    }\n\n    /**\n     * Gets the list of default layers.\n     * @return {Array}\n     */\n    getDefaultLayers(options) {\n        let maxZoom = 22;\n        if (isDefined(options) && options.maxZoom) {\n            maxZoom = options.maxZoom;\n        }\n        // copyrights\n        let mbAttr = 'Map data  <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n            mbUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n        let esriLink = '<a href=\"http://www.esri.com/\">Esri</a>';\n        let esriWholink = 'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';\n\n        // leaflet layers\n        let esriLayer = L.tileLayer(\n            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n                attribution: '&copy; ' + esriLink + ', ' + esriWholink,\n                maxZoom: maxZoom,\n                maxNativeZoom: 19\n            });\n\n        let streets = L.tileLayer(mbUrl, {id: 'mapbox.streets', attribution: mbAttr, maxZoom: maxZoom});\n\n        return [{\n            name: \"OSM Streets\",\n            layer: streets\n        }, {\n            name: \"Esri Satellite\",\n            layer: esriLayer\n        }];\n    }\n\n    /**\n     * @private\n     */\n    initLayers() {\n        // create the tile layer with correct attribution\n        let osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n        let osmAttrib = 'Map data  <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors';\n        let osm = new L.tileLayer(osmUrl, {\n            minZoom: 1,\n            maxZoom: 22,\n            attribution: osmAttrib\n        });\n        this.map.addLayer(osm);\n    }\n\n    /**\n     * Add a marker to the map.\n     * @param {Object} properties\n     * @param {Number} properties.lon\n     * @param {Number} properties.lat\n     * @param {String} properties.icon - the icon path\n     * @param {Integer[]} properties.iconAnchor - offset of the icon ex:[10,10]\n     * @param {String} properties.label - label of the tooltip\n     * @param {String} properties.description - description of the marker to display into the tooltip\n     * @param {String} properties.labelOffset - offset of the label of the tooltip\n     * @param {Number} properties.orientation - orientation of the icon in degree\n     * @return {string} the id of the new created marker\n     */\n    addMarker(properties) {\n        //create marker\n        let marker = null;\n        if (properties.icon !== null) {\n            let markerIcon = L.icon({\n                iconAnchor: properties.iconAnchor,\n                iconUrl: properties.icon\n            });\n\n            marker = L.marker([properties.lat, properties.lon], {\n                icon: markerIcon\n            });\n        } else {\n            marker = L.marker([properties.lat, properties.lon]);\n        }\n\n        if (properties.label !== null) {\n            marker.bindTooltip(properties.label, {\n                permanent: false,\n                direction: 'center',\n                offset: L.point(properties.labelOffset[0], properties.labelOffset[1])\n            });\n        }\n\n        let name = properties.hasOwnProperty(\"name\") && properties.name != null ? properties.name : \"\";\n        let desc = properties.hasOwnProperty(\"description\") && properties.description != null ? properties.description : \"\";\n        if (name.length > 0 || desc.length > 0) {\n            marker.bindPopup(name + '<div>' + desc + '</div>');\n        }\n\n        marker.addTo(this.map);\n        marker.setRotationAngle(properties.orientation);\n\n        let id = \"view-marker-\" + randomUUID();\n        this.markers[id] = marker;\n        let self = this;\n\n        marker._icon.id = id;\n\n        // adds onclick event\n        marker.on('click', function () {\n            let dataSourcesIds = [];\n            let entityId;\n            for (let stylerId in self.stylerToObj) {\n                if (self.stylerToObj[stylerId] === id) {\n                    let styler = self.stylerIdToStyler[stylerId];\n                    EventManager.fire(EventManager.EVENT.SELECT_VIEW,{\n                        dataSourcesIds: dataSourcesIds.concat(styler.getDataSourcesIds()),\n                        entityId : styler.viewItem.entityId\n                    });\n                    break;\n                }\n            }\n        });\n        return id;\n    }\n\n    removeViewItem(viewItem) {\n        const markerId = this.stylerToObj[viewItem.styler.id];\n        super.removeViewItem(viewItem);\n        if(isDefined(markerId)) {\n            let marker = this.markers[markerId];\n            if(isDefined(marker)) {\n                this.map.removeLayer(marker);\n            }\n\n            delete this.markers[markerId];\n        }\n    }\n\n    /**\n     * Add a polyline to the map.\n     * @param {Object} properties\n     * @param {Object[]} properties.locations - [{x, y}]\n     * @param {String} properties.color\n     * @param {Number} properties.weight\n     * @param {Number} properties.opacity\n     * * @param {Number} properties.smoothFactor\n     * @return {string} the id of the new created polyline\n     */\n    addPolyline(properties) {\n        let polylinePoints = [];\n\n        for (let i = 0; i < properties.locations.length; i++) {\n            polylinePoints.push(new L.LatLng(properties.locations[i].y, properties.locations[i].x));\n        }\n\n        //create path\n        let polyline = new L.Polyline(polylinePoints, {\n            color: properties.color,\n            weight: properties.weight,\n            opacity: properties.opacity,\n            smoothFactor: properties.smoothFactor\n        }).addTo(this.map);\n\n        let id = \"view-polyline-\" + randomUUID();\n        this.polylines[id] = polyline;\n\n        return id;\n    }\n\n    /**\n     * Updates the marker associated to the styler.\n     * @param {PointMarker} styler - The styler allowing the update of the marker\n     */\n    updateMarker(styler) {\n        let markerId = 0;\n        if (!(styler.getId() in this.stylerToObj)) {\n            // adds a new marker to the leaflet renderer\n            markerId = this.addMarker({\n                lat: styler.location.y,\n                lon: styler.location.x,\n                orientation: styler.orientation.heading,\n                color: styler.color,\n                icon: styler.icon,\n                iconAnchor: styler.iconAnchor,\n                label : styler.label,\n                labelColor : styler.labelColor,\n                labelSize : styler.labelSize,\n                labelOffset : styler.labelOffset,\n                name : styler.viewItem.name,\n\t\t\t\tdescription : styler.viewItem.description\n            });\n            this.stylerToObj[styler.getId()] = markerId;\n        } else {\n            markerId = this.stylerToObj[styler.getId()];\n        }\n\n        let marker = this.markers[markerId];\n        // updates position\n        let lon = styler.location.x;\n        let lat = styler.location.y;\n\n        if (!isNaN(lon) && !isNaN(lat)) {\n            let newLatLng = new L.LatLng(lat, lon);\n            marker.setLatLng(newLatLng);\n            if((this.first && this.autoZoomOnFirstMarker) || this.follow) {\n                const markerBounds = L.latLngBounds([newLatLng ]);\n                this.map.fitBounds(markerBounds, {\n                    maxZoom: styler.zoomLevel\n                });\n                if(this.first) {\n                    this.first = false;\n                }\n            }\n        }\n\n\n        // updates orientation\n        if(isDefined(styler.orientation)) {\n            marker.setRotationAngle(styler.orientation.heading);\n        }\n\n        if (styler.icon !== null && marker._icon.iconUrl !== styler.icon) {\n            // updates icon\n            let markerIcon = L.icon({\n                iconAnchor: styler.iconAnchor,\n                iconUrl: styler.icon\n            });\n            marker.setIcon(markerIcon);\n        }\n    }\n\n    /**\n     * Updates the polyline associated to the styler.\n     * @param {Polyline} styler - The styler allowing the update of the polyline\n     */\n    updatePolyline(styler) {\n        let polylineId = 0;\n\n        if (!(styler.getId() in this.stylerToObj)) {\n            // adds a new marker to the leaflet renderer\n            polylineId = this.addPolyline({\n                color: styler.color,\n                weight: styler.weight,\n                locations: styler.locations,\n                maxPoints: styler.maxPoints,\n                opacity: styler.opacity,\n                smoothFactor: styler.smoothFactor\n            });\n\n            this.stylerToObj[styler.getId()] = polylineId;\n        } else {\n            polylineId = this.stylerToObj[styler.getId()];\n        }\n\n        if (polylineId in this.polylines) {\n            let polyline = this.polylines[polylineId];\n\n            // removes the layer\n            this.map.removeLayer(polyline);\n\n            let polylinePoints = [];\n            for (let i = 0; i < styler.locations.length; i++) {\n                polylinePoints.push(new L.LatLng(styler.locations[i].y, styler.locations[i].x));\n            }\n\n            //create path\n            polyline = new L.Polyline(polylinePoints, {\n                color: styler.color,\n                weight: styler.weight,\n                opacity: styler.opacity,\n                smoothFactor: styler.smoothFactor\n            }).addTo(this.map);\n\n            this.polylines[polylineId] = polyline;\n        }\n    }\n\n    attachTo(parentElement) {\n        super.attachTo(parentElement);\n        // Fix leaflet bug when resizing the div parent container\n        this.map.invalidateSize();\n    }\n\n    onResize() {\n        super.onResize();\n        let that = this;\n        setTimeout(function(){ that.map.invalidateSize()}, 100);\n\n    }\n\n    onChange(data) {}\n}\n\n/***  little hack starts here ***/\n\nL.Map = L.Map.extend({\n    openPopup: function (popup) {\n        this._popup = popup;\n        return this.addLayer(popup).fire('popupopen', {\n            popup: this._popup\n        });\n    }\n});\n\n// Defines rotated marker\n(function () {\n    // save these original methods before they are overwritten\n    let proto_initIcon = L.Marker.prototype._initIcon;\n    let proto_setPos = L.Marker.prototype._setPos;\n\n    let oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\n\n    L.Marker.addInitHook(function () {\n        let iconAnchor = this.options.icon.options.iconAnchor;\n        if (iconAnchor) {\n            iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\n        }\n        this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom';\n        this.options.rotationAngle = this.options.rotationAngle || 0;\n    });\n\n    L.Marker.include({\n        _initIcon: function () {\n            proto_initIcon.call(this);\n        },\n\n        _setPos: function (pos) {\n            proto_setPos.call(this, pos);\n\n            if (this.options.rotationAngle) {\n                this._icon.style[L.DomUtil.TRANSFORM + 'Origin'] = this.options.rotationOrigin;\n\n                if (oldIE) {\n                    // for IE 9, use the 2D rotation\n                    this._icon.style[L.DomUtil.TRANSFORM] = ' rotate(' + this.options.rotationAngle + 'deg)';\n                } else {\n                    // for modern browsers, prefer the 3D accelerated version\n                    this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\n                }\n            }\n        },\n\n        setRotationAngle: function (angle) {\n            this.options.rotationAngle = angle;\n            this.update();\n            return this;\n        },\n\n        setRotationOrigin: function (origin) {\n            this.options.rotationOrigin = origin;\n            this.update();\n            return this;\n        }\n    });\n})();\n\n\n/***  end of hack ***/\n\nexport default  LeafletView;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport {randomUUID} from '../utils/Utils.js';\n\n/**\n * The DataConnector is the abstract class used to create different connectors.\n */\nclass DataConnector {\n    /**\n     * @param {String} url - The full url used to connect to the data stream\n     */\n    constructor(url) {\n        this.url = url;\n        this.id = \"DataConnector-\" + randomUUID();\n\n        this.reconnectTimeout = 1000 * 60 * 2; //2 min\n    }\n\n    /**\n     * Sets the url\n     * @param url\n     */\n    setUrl(url) {\n        this.url = url;\n    }\n\n    /**\n     * The data connector default id.\n     * @return {String}\n     */\n    getId() {\n        return this.id;\n    }\n\n    /**\n     * The stream url.\n     * @return {String}\n     */\n    getUrl() {\n        return this.url;\n    }\n\n    /**\n     * Sets the reconnection timeout\n     * @param {Number} timeout - delay in milliseconds before reconnecting dataSource\n     */\n    setReconnectTimeout(timeout) {\n        this.reconnectTimeout = timeout;\n    }\n\n    onReconnect(){}\n}\n\nexport default DataConnector;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport DataConnector from './DataConnector.js';\nimport {isWebWorker} from '../utils/Utils.js';\n\n/**\n * Defines the AjaxConnector to connect to a remote server by making AjaxRequest.\n * @extends DataConnector\n * @example\n * import Buffer from 'osh/dataconnector/WebSocketConnector.js';\n *\n * let url = ...;\n * let connector = new WebSocketConnector(url);\n *\n * // connect\n * connector.connect();\n *\n * // disconnect\n * connector.disconnect();\n *\n * // close\n * connector.close();\n *\n */\n\nclass WebSocketConnector extends DataConnector {\n    /**\n     *\n     * @param properties -\n     */\n    constructor(properties) {\n        super(properties);\n        this.blobURL = URL.createObjectURL(new Blob(['(',\n\n                function () {\n                    var ws = null;\n                    self.onmessage = function (e) {\n                        if (e.data === 'close') {\n                            close();\n                        } else {\n                            // is URL\n                            init(e.data);\n                        }\n                    }\n\n                    function init(url) {\n                        ws = new WebSocket(url);\n                        ws.binaryType = 'arraybuffer';\n                        ws.onmessage = function (event) {\n                            //callback data on message received\n                            if (event.data.byteLength > 0) {\n                                self.postMessage(event.data, [event.data]);\n                            }\n                        }\n\n                        ws.onerror = function (event) {\n                            console.error('WebSocket WebWorker stream error: ' + event);\n                            close();\n                        };\n                    }\n\n                    function close() {\n                        if(ws.readyState === WebSocket.OPEN) {\n                            ws.close();\n                        }\n                    }\n                }.toString(), ')()'],\n            {type: 'application/javascript'}));\n        this.interval = -1;\n        this.lastTimestamp = -1;\n    }\n\n    /**\n     * Connect to the webSocket. If the system supports WebWorker, it will automatically creates one otherwise use\n     * the main thread.\n     */\n    connect() {\n        if (!this.init) {\n            this.init = true;\n            //creates Web Socket\n            if (isWebWorker()) {\n                var url = this.getUrl();\n                this.worker = new Worker(this.blobURL);\n\n                this.worker.postMessage(url);\n                this.worker.onmessage = function (e) {\n                    this.lastTimestamp = Date.now();\n                    this.onMessage(e.data);\n                }.bind(this);\n\n                // closes socket if any errors occur\n                this.worker.onerror = function (event) {\n                    console.error('WebSocket stream error: ' + event);\n                    this.worker.close();\n                    this.init = false;\n                }.bind(this);\n\n            } else {\n                this.ws = new WebSocket(this.getUrl());\n                this.ws.binaryType = 'arraybuffer';\n                this.ws.onmessage = function (event) {\n                    this.lastTimestamp = Date.now();\n                    //callback data on message received\n                    if (event.data.byteLength > 0) {\n                        this.onMessage(event.data);\n                    }\n                }.bind(this);\n\n                // closes socket if any errors occur\n                this.ws.onerror = function (event) {\n                    console.error('WebSocket stream error: ' + event);\n                    this.ws.close();\n                    this.init = false;\n                    this.lastTimestamp = -1;\n                }.bind(this);\n            }\n\n            //init the reconnect handler\n            if (this.interval === -1) {\n                this.interval = window.setInterval(function () {\n                    let currentTimestamp = Date.now();\n                    let delta = currentTimestamp - this.lastTimestamp;\n                    if (this.lastTimestamp === -1 || (delta >= this.reconnectTimeout)) {\n                        console.warn('trying to reconnect..');\n                        this.reconnect();\n                    }\n                }.bind(this), this.reconnectTimeout);\n            }\n        }\n    }\n\n    /**\n     * Disconnects the websocket.\n     */\n    disconnect() {\n        this.fullDisconnect(true);\n    }\n\n    /**\n     * Fully disconnect the websocket connection by sending a close message to the webWorker.\n     * @param {Boolean} removeInterval  - force removing the interval\n     */\n    fullDisconnect(removeInterval) {\n        if (this.worker != null) {\n            this.worker.postMessage(\"close\");\n            this.worker.terminate();\n            this.init = false;\n        } else if (this.ws != null) {\n            this.ws.close();\n            this.init = false;\n        }\n        if (removeInterval) {\n            window.clearInterval(this.interval);\n        }\n    }\n\n    /**\n     * Try to reconnect if the connexion if closed\n     */\n    reconnect() {\n        this.onReconnect();\n        if (this.init) {\n            this.fullDisconnect(false);\n        }\n        this.connect();\n\n    }\n\n    /**\n     * The onMessage method used by the websocket to callback the data\n     * @param data the callback data\n     * @event\n     */\n    onMessage(data) {\n    }\n\n    /**\n     * Closes the webSocket.\n     */\n    close() {\n        this.disconnect();\n    }\n}\n\nexport default WebSocketConnector;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport DataConnector from './DataConnector.js';\nimport {isDefined} from '../utils/Utils.js';\n\n/**\n * Defines the AjaxConnector to connect to a remote server by making AjaxRequest.\n * @extends DataConnector\n * @example\n * import Ajax from 'osh/dataconnector/Ajax.js';\n *\n * let request = ...;\n * let connector = new Ajax(url);\n *\n * // handle onSuccess\n * connector.onSuccess = function(event) {\n *  // does something\n * }\n *\n * connector.onError = function(event) {\n *  // does something\n * }\n *\n * // send request\n * connector.sendRequest(request);\n *\n */\nclass Ajax extends DataConnector {\n\n    /**\n     * Creates Ajax.\n     * @param {String} url -\n     * @param {Object} properties -\n     * @param {String} properties.method -\n     * @param {String} properties.responseType -\n     */\n    constructor(url, properties) {\n        super(url);\n\n        this.method = \"POST\";\n        this.responseType = \"arraybuffer\";\n\n        if (isDefined(properties)) {\n            if (properties.method) {\n                this.method = properties.method;\n            }\n\n            if (properties.responseType) {\n                this.responseType = properties.responseType;\n            }\n        }\n    }\n\n    /**\n     * Sends the request to the defined server.\n     * @param {String} request - The Http request\n     * @param {String} extraUrl - get query parameters\n     */\n    sendRequest(request, extraUrl) {\n        let self = this;\n        let xmlhttp = new XMLHttpRequest();\n        xmlhttp.timeout = 60000;\n        if (request === null) {\n            if (isDefined(extraUrl)) {\n                xmlhttp.open(\"GET\", this.getUrl() + \"?\" + extraUrl, true);\n            } else {\n                xmlhttp.open(\"GET\", this.getUrl(), true);\n            }\n            xmlhttp.responseType = this.responseType;\n            xmlhttp.onload = (oEvent) => {\n                if (xmlhttp.response) {\n                    self.onMessage(xmlhttp.response);\n                }\n            };\n            xmlhttp.ontimeout = (e) => {\n                console.log(\"Timeout\");\n            };\n\n            xmlhttp.send(null);\n        } else {\n            xmlhttp.open(\"POST\", this.getUrl(), true);\n            xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n\n            xmlhttp.send(request);\n\n            xmlhttp.onreadystatechange = () => {\n                if (xmlhttp.readyState < 4) {\n                    // while waiting response from server\n                } else if (xmlhttp.readyState === 4) {                // 4 = Response from server has been completely loaded.\n                    if (xmlhttp.status === 200 && xmlhttp.status < 300) { // http status between 200 to 299 are all successful\n                        self.onSuccess(xmlhttp.responseText);\n                    } else {\n                        self.onError(\"\");\n                    }\n                }\n            };\n        }\n    }\n\n    /**\n     * This is the callback method in case of getting error connection.\n     * @param event The error details\n     * @event\n     */\n    onError(event) {\n\n    }\n\n    /**\n     * This is the callback method in case of getting success connection.\n     * @param event\n     * @event\n     */\n    onSuccess(event) {\n\n    }\n\n    /**\n     * Sends the request\n     * @private\n     */\n    connect() {\n        this.sendRequest(null);\n    }\n}\nexport default Ajax;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport {randomUUID, isDefined} from '../utils/Utils.js';\nimport WebSocketConnector from \"../dataconnector/WebSocketConnector.js\";\nimport Ajax from \"../dataconnector/Ajax.js\";\nimport EventManager from \"../events/EventManager.js\";\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\nclass DataSource {\n    /**\n     * @param {String} name - the datasource name\n     * @param {Object} properties - the datasource properties\n     * @param {Boolean} properties.timeShift - fix some problem with some android devices with some timestamp shift to 16 sec\n     * @param {Boolean} properties.syncMasterTime - defines if the datasource is synchronize with the others one\n     * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered\n     * @param {Number} properties.timeOut - defines the limit time before data has to be skipped\n     * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}\n     * @param {String} properties.endpointUrl the endpoint url\n     * @param {String} properties.service the service\n     * @param {String} properties.offeringID the offeringID\n     * @param {String} properties.observedProperty the observed property\n     * @param {String} properties.startTime the start time (ISO format)\n     * @param {String} properties.endTime the end time (ISO format)\n     * @param {Number} properties.replaySpeed the replay factor\n     * @param {Number} properties.responseFormat the response format (e.g video/mp4)\n     * @return {String} the full url\n     */\n    constructor(name, properties) {\n        this.id = \"DataSource-\" + randomUUID();\n        this.name = name;\n        this.properties = properties;\n        this.timeShift = 0;\n        this.connected = false;\n\n        this.initDataSource(properties);\n\n        this.lastTimeStamp = Date.now();\n        this.lastStartTime = 'now';\n    }\n\n    /**\n     * Inits the datasource with the constructor properties.\n     * @private\n     * @param properties\n     */\n    initDataSource(properties) {\n\n        if (isDefined(properties.timeShift)) {\n            this.timeShift = properties.timeShift;\n        }\n\n        if (isDefined(properties.syncMasterTime)) {\n            this.syncMasterTime = properties.syncMasterTime;\n        } else {\n            this.syncMasterTime = false;\n        }\n\n        if (isDefined(properties.bufferingTime)) {\n            this.bufferingTime = properties.bufferingTime;\n        }\n\n        if (isDefined(properties.timeOut)) {\n            this.timeOut = properties.timeOut;\n        }\n\n        // checks if type is WebSocketConnector\n        if (properties.protocol.startsWith('ws')) {\n            this.connector = new WebSocketConnector(this.buildUrl(properties));\n            // connects the callback\n            this.connector.onMessage = this.onMessage.bind(this);\n        } else if (properties.protocol.startsWith('http')) {\n            this.connector = new Ajax(this.buildUrl(properties));\n            this.connector.responseType = 'arraybuffer';\n            // connects the callback\n            this.connector.onMessage = this.onMessage.bind(this);\n        }\n\n        this.connector.onReconnect = () => {\n            // if not real time, preserve last timestamp\n            if(this.lastStartTime !== 'now') {\n                properties.startTime = new Date(this.lastTimeStamp).toISOString();\n                this.connector.setUrl(this.buildUrl(properties));\n            }\n        }\n    }\n\n    /**\n     * Disconnect the dataSource then the connector will be closed as well.\n     */\n    disconnect() {\n        this.connector.disconnect();\n        this.connected = false;\n\n        // send data reset event\n        EventManager.fire(EventManager.EVENT.DATA + \"-\" + this.id, {\n            dataSourceId: this.id,\n            reset: true\n        });\n    }\n\n    /**\n     * Connect the dataSource then the connector will be opened as well.\n     */\n    connect() {\n        this.connector.connect();\n        this.connected = true;\n    }\n\n    /**\n     * The callback which receives data.\n     * @event\n     * @param {Object} data - data received\n     */\n    onMessage(data) {\n        this.onData({\n            timeStamp: this.parseTimeStamp(data) + this.timeShift,\n            data: this.parseData(data)\n        });\n    }\n\n    /**\n     * The default timestamp parser\n     * @param data - the full data message returned by the connector\n     * @return {Number} the formatted timestamp\n     */\n    parseTimeStamp(data) {\n        return new Date().getTime();\n    }\n\n    /**\n     * The default data parser\n     * @param data the full data message returned by the connector\n     * @return {String|Object|number|ArrayBuffer|*} data the formatted data\n     */\n    parseData(data) {\n        return data;\n    }\n\n    /**\n     * Fires the EventManager.EVENT.DATA event\n     * @param {Object} data the data object\n     * data is represented as\n     * data = {\n     *    timeStamp: timeStamp // number\n     *    data: data // data to render\n     * };\n     */\n    onData(data) {\n        EventManager.fire(EventManager.EVENT.DATA + \"-\" + this.id, {data: data});\n    }\n\n    /**\n     * Gets the datasource id.\n     * @return {String} the datasource id\n     */\n    getId() {\n        return this.id;\n    }\n\n    /**\n     * Gets the datasource name.\n     * @return {String} the datasource name\n     */\n    getName() {\n        return this.name;\n    }\n\n    /**\n     * Builds the full url.\n     * @private\n     * @param {Object} properties\n     * @param {String} properties.protocol the connector protocol\n     * @param {String} properties.endpointUrl the endpoint url\n     * @param {String} properties.service the service\n     * @param {String} properties.offeringID the offeringID\n     * @param {String} properties.observedProperty the observed property\n     * @param {String} properties.startTime the start time (ISO format)\n     * @param {String} properties.endTime the end time (ISO format)\n     * @param {Number} properties.replaySpeed the replay factor\n     * @param {Number} properties.responseFormat the response format (e.g video/mp4)\n     * @return {String} the full url\n     */\n    buildUrl(properties) {\n        let url = \"\";\n\n        // adds protocol\n        url += properties.protocol + \"://\";\n\n        // adds endpoint url\n        url += properties.endpointUrl + \"?\";\n\n        // adds service\n        url += \"service=\" + properties.service + \"&\";\n\n        // adds version\n        url += \"version=2.0&\";\n\n        // adds request\n        url += \"request=GetResult&\";\n\n        // adds offering\n        url += \"offering=\" + properties.offeringID + \"&\";\n\n        // adds feature of interest urn\n        if (properties.foiURN && properties.foiURN !== '') {\n            url += 'featureOfInterest=' + properties.foiURN + '&';\n        }\n\n        // adds observedProperty\n        url += \"observedProperty=\" + properties.observedProperty + \"&\";\n\n        // adds temporalFilter\n        this.lastStartTime = properties.startTime;\n\n        let endTime = properties.endTime;\n        url += \"temporalFilter=phenomenonTime,\" + this.lastStartTime + \"/\" + endTime + \"&\";\n\n        if (properties.replaySpeed) {\n            // adds replaySpeed\n            url += \"replaySpeed=\" + properties.replaySpeed;\n        }\n\n        // adds responseFormat (optional)\n        if (properties.responseFormat) {\n            url += \"&responseFormat=\" + properties.responseFormat;\n        }\n\n        return url;\n    }\n\n    /**\n     * Set the delay before reconnecting the dataSource\n     * @param {Number} timeout - the delay in ms after reconnecting the dataSource\n     */\n    setReconnectTimeout (timeout) {\n        return  this.connector.setReconnectTimeout(timeout);\n    }\n\n\n}\n\nexport default DataSource;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\nimport DataSource from './DataSource.js';\n\n/**\n * This datasource provides generic parsing for JSON response.\n *\n * @extends DataSource\n * @example\n * import SweJson from 'osh/datareceiver/SweJson.js';\n *\n * let androidPhoneGpsDataSource = new SweJson(\"android-GPS\", {\n    protocol: \"ws\",\n    service: \"SOS\",\n    endpointUrl: \"sensiasoft.net:8181/sensorhub/sos\",\n    offeringID: \"urn:android:device:060693280a28e015-sos\",\n    observedProperty: \"http://sensorml.com/ont/swe/property/Location\",\n    startTime: \"2015-02-16T07:58:00Z\",\n    endTime: \"2015-02-16T08:09:00Z\",\n    replaySpeed: replayFactor+\"\",\n    syncMasterTime: true,\n    bufferingTime: 1000,\n    timeShift: -16000\n  });\n */\n\nclass SweJson extends DataSource {\n\n    /**\n     * Extracts timestamp from the message. The timestamp corresponds to the 'time' attribute of the JSON object.\n     * @param {String} data - the data to parse\n     * @return {Number} the extracted timestamp\n     */\n    parseTimeStamp(data) {\n        let rec = String.fromCharCode.apply(null, new Uint8Array(data));\n        this.lastTimeStamp = new Date(JSON.parse(rec)['time']).getTime();\n        return this.lastTimeStamp;\n    }\n\n    /**\n     * Extract data from the message. The data are corresponding to the whole list of attributes of the JSON object\n     * excepting the 'time' one.\n     * @param {Object} data - the data to parse\n     * @return {Object} the parsed data\n     * @example\n     * {\n     *   location : {\n     *    lat:43.61758626,\n     *    lon: 1.42376557,\n     *    alt:100\n     *   }\n     * }\n     */\n    parseData(data) {\n        let rec = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(data)));\n\n        let result = {};\n\n        for (let key in rec) {\n            if (key !== 'time') {\n                result[key] = rec[key];\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Builds the full url.\n     * @param {Object} properties\n     * @param {String} properties.protocol - the connector protocol\n     * @param {String} properties.endpointUrl - the endpoint url\n     * @param {String} properties.service - the service\n     * @param {String} properties.offeringID - the offeringID\n     * @param {String} properties.observedProperty -  the observed property\n     * @param {String} properties.startTime - the start time (ISO format)\n     * @param {String} properties.endTime - the end time (ISO format)\n     * @param {Number} properties.replaySpeed - the replay factor\n     * @param {Number} properties.responseFormat - the response format (e.g video/mp4)\n     * @return {String} the full url\n     */\n    buildUrl(properties) {\n        let url = \"\";\n\n        // adds protocol\n        url += properties.protocol + \"://\";\n\n        // adds endpoint url\n        url += properties.endpointUrl + \"?\";\n\n        // adds service\n        url += \"service=\" + properties.service + \"&\";\n\n        // adds version\n        url += \"version=2.0&\";\n\n        // adds request\n        url += \"request=GetResult&\";\n\n        // adds offering\n        url += \"offering=\" + properties.offeringID + \"&\";\n\n        // adds feature of interest urn\n        if (properties.foiURN && properties.foiURN !== '') {\n            url += 'featureOfInterest=' + properties.foiURN + '&';\n        }\n\n        // adds observedProperty\n        url += \"observedProperty=\" + properties.observedProperty + \"&\";\n\n        // adds temporalFilter\n        let startTime = properties.startTime;\n        let endTime = properties.endTime;\n        if (startTime !== \"now\" && this.timeShift !== 0) {\n            // HACK: don't do it for old Android dataset that is indexed differently\n            if (properties.offeringID !== \"urn:android:device:060693280a28e015-sos\") {\n                // apply time shift\n                startTime = new Date(Date.parse(startTime) - this.timeShift).toISOString();\n                endTime = new Date(Date.parse(endTime) - this.timeShift).toISOString();\n            }\n        }\n        url += \"temporalFilter=phenomenonTime,\" + startTime + \"/\" + endTime + \"&\";\n\n        if (properties.replaySpeed) {\n            // adds replaySpeed\n            url += \"replaySpeed=\" + properties.replaySpeed;\n        }\n\n        // adds responseFormat (mandatory)\n        url += \"&responseFormat=application/json\";\n\n        return url;\n    }\n}\n\nexport default SweJson;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport {assertArray, assertFunction, hasValue, isDefined, randomUUID} from \"../../utils/Utils.js\";\nimport EventManager from \"../../events/EventManager.js\";\n\n/**\n * This class is in charge of defining a Styler object.\n */\nclass Styler {\n    /**\n     *\n     * @param {Object[]} jsonProperties - contains a list of Functions\n     */\n    constructor(jsonProperties) {\n        this.properties = jsonProperties;\n        this.id = \"styler-\" + randomUUID();\n        this.dataSourceToStylerMap = {};\n        this.initEvents();\n    }\n\n    /**\n     * @private\n     * @param funcName\n     * @return {*}\n     */\n    checkFn(funcName) {\n        let func = this.properties[funcName];\n        let isSet = hasValue(func);\n        if (isSet) {\n            assertArray(func.dataSourceIds, funcName + \".dataSourceIds\");\n            assertFunction(func.handler, funcName + \".handler\");\n        }\n        return isSet;\n    }\n\n    /**\n     * @private\n     */\n    initEvents() {\n        var that = this;\n        EventManager.observe(EventManager.EVENT.DATASOURCE_UPDATE_TIME, (event) => that.clear());\n    }\n\n    /**\n     * Clear the styler.\n     */\n    clear() {\n    }\n\n    /**\n     * Gets the styler id.\n     * @return {String} the styler id\n     */\n    getId() {\n        return this.id;\n    }\n\n    /**\n     * Selects the datasource contained into the list\n     * @param {Array} dataSourceIds the list of datasources\n     */\n    select(dataSourceIds) {\n    }\n\n    /**\n     * Adds a function associated to a list of dataSource ids\n     * @param {String[]} dataSourceIds - the list of datasources\n     * @param {Function} fn - the function to add\n     */\n    addFn(dataSourceIds, fn) {\n        for (let i = 0; i < dataSourceIds.length; i++) {\n            let dataSourceId = dataSourceIds[i];\n            if (!isDefined(this.dataSourceToStylerMap[dataSourceId])) {\n                this.dataSourceToStylerMap[dataSourceId] = [];\n            }\n            this.dataSourceToStylerMap[dataSourceId].push(fn);\n        }\n    }\n\n    /**\n     *\n     * @param dataSourceId\n     * @param rec\n     * @param view\n     * @param options\n     * @return {Boolean}\n     */\n    setData(dataSourceId, rec, view, options) {\n        if (dataSourceId in this.dataSourceToStylerMap) {\n            let fnArr = this.dataSourceToStylerMap[dataSourceId];\n            for (let i = 0; i < fnArr.length; i++) {\n                fnArr[i](rec.data, rec.timeStamp, options);\n            }\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     *\n     * @return {String[]} The list of dataSource ids\n     */\n    getDataSourcesIds() {\n        let res = [];\n        for (let i in this.dataSourceToStylerMap) {\n            res.push(i);\n        }\n        return res;\n    }\n\n    /**\n     * Inits the styler.\n     */\n    init() {\n    }\n}\n\nexport default Styler;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport {assertArray, assertObject, assertPositive, assertString, hasValue, isDefined} from \"../../utils/Utils.js\";\nimport Styler from \"./Styler.js\";\n\n/**\n * @extends Styler\n * @example\n *\n * import PointMarker from 'osh/ui/styler/PointMarker.js';\n *\n * let pointMarker = new PointMarker({\n        location : {\n            x : 1.42376557,\n            y : 43.61758626,\n            z : 100\n        },\n        locationFunc : {\n            dataSourceIds : [androidPhoneGpsDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    x : rec.lon,\n                    y : rec.lat,\n                    z : rec.alt\n                };\n            }\n        },\n        orientationFunc : {\n            dataSourceIds : [androidPhoneOrientationDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    heading : rec.heading\n                };\n            }\n        },\n        icon : 'images/cameralook.png',\n        iconFunc : {\n            dataSourceIds: [androidPhoneGpsDataSource.getId()],\n            handler : function(rec,timeStamp,options) {\n                if(options.selected) {\n                    return 'images/cameralook-selected.png'\n                } else {\n                    return 'images/cameralook.png';\n                };\n            }\n        }\n    });\n */\nclass PointMarker extends Styler {\n\t/**\n\t\t* Create the PointMarker\n\t\t* @param {Object} properties\n\t\t* @param {Number[]} properties.location - [x,y,z]\n  \t\t* @param {Number} [properties.orientation=0] -\n\t\t* @param {String} properties.icon -\n\t\t* @param {Number[]} [properties.iconAnchor=[16,16]] -\n\t\t* @param {Number[]} [properties.iconSize=[16,16]] -\n\t\t* @param {String} properties.label -\n\t\t* @param {String} [properties.labelColor=\"#000000\"] - HTML color\n\t\t* @param {Number} [properties.labelSize=16] -\n\t\t* @param {Number[]} [properties.labelOffset=[0,0]] -\n\t\t* @param {Function} properties.locationFunc -\n\t\t* @param {Function} properties.orientationFunc -\n\t\t* @param {Function} properties.iconFunc -\n\t\t* @param {Function} properties.labelFunc -\n\t\t* @param {Function} properties.labelColorFunc -\n\t\t* @param {Function} properties.labelSizeFunc -\n\t \t* @param {Number} [properties.zoomLevel=15] -\n\t\t*\n\t\t*/\n\tconstructor(properties) {\n\t\tsuper(properties);\n\t\tthis.properties = properties;\n\t\tthis.location = null;\n\t\tthis.orientation = {heading:0};\n\t\tthis.icon = null;\n\t\tthis.iconAnchor = [16,16];\n\t\tthis.iconSize = [16,16];\n\t\tthis.label = null;\n\t\tthis.labelColor = \"#000000\";\n\t\tthis.labelSize = 16;\n\t\tthis.labelOffset = [0,0];\n\t\tthis.zoomLevel = 15;\n\t\tthis.color = null;\n\t\tthis.defaultToTerrainElevation = false;\n\n\t\tthis.options = {};\n\n\t\tif(isDefined(properties.defaultToTerrainElevation)) {\n\t\t\tthis.defaultToTerrainElevation = properties.defaultToTerrainElevation;\n\t\t}\n\n\t\tif (hasValue(properties.location)) {\n\t\t\tassertObject(properties.location, \"location\");\n\t\t\tthis.location = properties.location;\n\t\t}\n\n\t\tif (hasValue(properties.orientation)) {\n\t\t\tassertObject(properties.orientation, \"orientation\");\n\t\t\tthis.orientation = properties.orientation;\n\t\t}\n\n\t\tif (hasValue(properties.icon)) {\n\t\t\tassertString(properties.icon, \"icon\");\n\t\t\tthis.icon = properties.icon;\n\t\t}\n\n\t\tif (hasValue(properties.iconAnchor)) {\n\t\t\tassertArray(properties.iconAnchor, \"iconAnchor\");\n\t\t\tthis.iconAnchor = properties.iconAnchor;\n\t\t}\n\n\t\tif (hasValue(properties.iconSize)) {\n\t\t\tassertArray(properties.iconSize, \"iconSize\");\n\t\t\tthis.iconSize = properties.iconSize;\n\t\t}\n\n\t\tif (hasValue(properties.label)) {\n\t\t\tassertString(properties.label, \"label\");\n\t\t\tthis.label = properties.label;\n\t\t}\n\n\t\tif (hasValue(properties.labelColor)) {\n\t\t\tassertString(properties.labelColor, \"labelColor\");\n\t\t\tthis.labelColor = properties.labelColor;\n\t\t}\n\n\t\tif (hasValue(properties.labelSize)) {\n\t\t\tassertPositive(properties.labelSize, \"labelSize\");\n\t\t\tthis.labelSize = properties.labelSize;\n\t\t}\n\n\t\tif (hasValue(properties.labelOffset)) {\n\t\t\tassertArray(properties.labelOffset, \"labelOffset\");\n\t\t\tthis.labelOffset = properties.labelOffset;\n\t\t}\n\n\n\t\tif (hasValue(properties.zoomLevel)) {\n\t\t\tassertPositive(properties.zoomLevel, \"zoomLevel\");\n\t\t\tthis.zoomLevel = properties.zoomLevel;\n\t\t}\n\n\t\tlet that = this;\n\t\tif (this.checkFn(\"locationFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.location = properties.locationFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.locationFunc.dataSourceIds,fn);\n\t\t}\n\n\t\tif (this.checkFn(\"orientationFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.orientation = properties.orientationFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.orientationFunc.dataSourceIds,fn);\n\t\t}\n\n\t\tif (this.checkFn(\"iconFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.icon = properties.iconFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.iconFunc.dataSourceIds,fn);\n\t\t}\n\n\t\tif (this.checkFn(\"labelFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.label = properties.labelFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.labelFunc.dataSourceIds,fn);\n\t\t}\n\n\t\tif (this.checkFn(\"labelColorFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.labelColor = properties.labelColorFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.labelColorFunc.dataSourceIds,fn);\n\t\t}\n\n\t\tif (this.checkFn(\"labelSizeFunc\")) {\n\t\t\tlet fn = function(rec,timeStamp,options) {\n\t\t\t\tthat.labelSize = properties.labelSizeFunc.handler(rec,timeStamp,options);\n\t\t\t};\n\t\t\tthis.addFn(properties.labelSizeFunc.dataSourceIds,fn);\n\t\t}\n\t}\n\n\tinit(view) {\n\t\tsuper.init(view);\n\t\tif (isDefined(view) && this.location !== null) {\n\t\t\tview.updateMarker(this,0,{});\n\t\t}\n\t}\n\n\tsetData(dataSourceId,rec,view,options) {\n\t\tif (super.setData(dataSourceId,rec,view,options)) {\n\t\t\tif (isDefined(view) && this.location !== null) {\n\t\t\t\tview.updateMarker(this, rec.timeStamp, options);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport default PointMarker;\n","<template>\n  <div\n    id=\"leafletMap\"\n    class=\"map\" />\n</template>\n\n<script>\n    // @ is an alias to /src\nimport LeafletView from \"osh/ui/view/map/LeafletView.js\";\nimport SweJson from \"osh/datareceiver/SweJson.js\";\nimport PointMarker from \"osh/ui/styler/PointMarker.js\";\n\nexport default {\n  name: \"Map\",\n  components: {},\n  mounted() {\n    this.init();\n  },\n\n  methods: {\n    init() {\n      let gpsDataSource = new SweJson(\"android-GPS\", {\n        protocol: \"ws\",\n        service: \"SOS\",\n        endpointUrl: \"sensiasoft.net:8181/sensorhub/sos\",\n        offeringID: \"urn:android:device:060693280a28e015-sos\",\n        observedProperty: \"http://sensorml.com/ont/swe/property/Location\",\n        startTime: \"2015-02-16T07:58:32Z\",\n        endTime: \"2015-02-16T08:09:00Z\",\n        replaySpeed: 3\n      });\n\n      // style it with a moving point marker\n      let pointMarker = new PointMarker({\n        locationFunc: {\n          dataSourceIds: [gpsDataSource.getId()],\n          handler: function (rec) {\n            return {\n              x: rec.location.lon,\n              y: rec.location.lat,\n              z: rec.location.alt\n            };\n          }\n        },\n        icon: './images/car-location.png',\n        iconAnchor: [16, 65]\n      });\n\n      // create Leaflet view\n      new LeafletView(\"leafletMap\",\n                      [{\n                        styler: pointMarker,\n                        name: \"Android Phone GPS\"\n                      }]\n      );\n\n      // start streaming\n      gpsDataSource.connect();\n    }\n  }\n};\n</script>\n<style>\n  .map {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 5;\n  }\n\n  .leaflet-container {\n    height: 100%;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=14c6c5a4&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('dialog-drag',{staticClass:\"resizable\",attrs:{\"id\":\"drag-window-1\",\"title\":\"Video MJPEG\",\"options\":{ width:350,top:100,left:2 }}},[_c('div',{attrs:{\"id\":\"video-container\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport DataSource from './DataSource.js';\n\n/**\n * This datasource provides parsing to MJPEG raw data.\n * Data: ArrayBuffer\n * @extends DataSource\n * @example\n * import VideoMjpeg from 'osh/datareceiver/VideoMjpeg.js';\n *\n var androidPhoneVideoDataSource = new VideoMjpeg(\"android-Video\", {\n    protocol: \"ws\",\n    service: \"SOS\",\n    endpointUrl: \"sensiasoft.net:8181/sensorhub/sos\",\n    offeringID: \"urn:android:device:060693280a28e015-sos\",\n    observedProperty: \"http://sensorml.com/ont/swe/property/VideoFrame\",\n    startTime: \"2015-02-16T07:58:00Z\",\n    endTime: \"2015-02-16T08:09:00Z\",\n    replaySpeed: 1,\n    syncMasterTime: true,\n    bufferingTime: 1000\n  });\n */\nclass VideoMjpeg extends DataSource {\n\n    /**\n     * @param {String} name - the datasource name\n     * @param {Object} properties - the datasource properties\n     * @param {Boolean} properties.timeShift - fix some problem with some android devices with some timestamp shift to 16 sec\n     * @param {Boolean} properties.syncMasterTime - defines if the datasource is synchronize with the others one\n     * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered\n     * @param {Number} properties.timeOut - defines the limit time before data has to be skipped\n     * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}\n     */\n    constructor(name, properties) {\n        super(name, properties);\n        this.setReconnectTimeout(1000 * 5); // 5 sec\n    }\n\n    /**\n     * Extracts timestamp from the message. The timestamp is corresponding to the first 64 bits of the binary message.\n     * @param {ArrayBuffer} data - the data to parse\n     * @returns {Number} the extracted timestamp\n     */\n    parseTimeStamp(data) {\n        this.lastTimeStamp = new DataView(data).getFloat64(0, false) * 1000; // read double time stamp as big endian\n        return this.lastTimeStamp;\n    }\n\n    /**\n     * Extracts data from the message. Creates a Blob object starting at byte 12. (after the 64 bits of the timestamp).\n     * @param {ArrayBuffer} data - the data to parse\n     * @return {Blob} the parsed data\n     */\n    parseData(data) {\n        let imgBlob = new Blob([data]);\n        // slice makes a shallow copy, we can release the blob\n        let url = window.URL.createObjectURL(imgBlob.slice(12));\n        window.URL.revokeObjectURL(imgBlob);\n        return url;\n    }\n}\n\nexport default  VideoMjpeg;\n","/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\nimport View from \"../View.js\";\nimport {isDefined} from \"../../../utils/Utils.js\";\nimport EventManager from \"../../../events/EventManager.js\";\n\n/**\n * @extends View\n * @example\n *\nimport MjpegView from 'osh/ui/view/video/MjpegView.js';\n\nvar videoView = new MjpegView(\"containerId\", {\n    dataSourceId: datasource.id,\n    entity : entity,\n    css: \"video\",\n    cssSelected: \"video-selected\",\n    name: \"Video\"\n});\n */\n\nclass MjpegView extends View {\n  /**\n   * Create a View.\n   * @param {String} parentElementDivId - The div element to attach to\n   * @param {Object} options - the properties of the view\n   * @param {String} options.dataSourceId - The dataSource id of the dataSource providing data to the view\n   * @param {String} options.entityId - The entity id to which the view belongs to\n   * @param {String} options.showTime - Display or not the time onto the view\n   * @param {String} options.rotation - Allow to define a rotation in degree\n   *\n   */\n  constructor(parentElementDivId,options) {\n    super(parentElementDivId,[],options);\n\n    // create timestamp slot\n    this.timeStamp = null;\n    if (isDefined(options.showTime) && options.showTime) {\n        this.timeStamp = document.createElement(\"div\");\n        this.timeStamp.setAttribute(\"class\", \"video-time\");\n        document.getElementById(this.divId).appendChild(this.timeStamp);\n    }\n\n    // creates video tag element\n    this.imgTag = document.createElement(\"img\");\n    this.imgTag.setAttribute(\"class\", \"video-mjpeg\");\n\n    // rotation option\n    this.rotation = 0;\n    if (typeof(options) != \"undefined\" && typeof(options.rotation) != \"undefined\") {\n        this.rotation = options.rotation*Math.PI/180;\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = 640;\n        this.canvas.height = 480;\n        var ctx = this.canvas.getContext('2d');\n        ctx.translate(0, 480) ;\n        ctx.rotate(this.rotation);\n        document.getElementById(this.divId).appendChild(this.canvas);\n    } else {\n        // appends <img> tag to <div>\n        document.getElementById(this.divId).appendChild(this.imgTag);\n    }\n\n    // adds listener\n    let self = this;\n    EventManager.observeDiv(this.divId,\"click\",(event) => {\n      EventManager.fire(EventManager.EVENT.SELECT_VIEW,{\n        dataSourcesIds: [self.dataSourceId],\n        entityId : self.entityId\n      });\n    });\n  }\n\n  setData(dataSourceId,data) {\n      let oldBlobURL = this.imgTag.src;\n      this.imgTag.src = data.data;\n      if (this.timeStamp !== null) {\n          this.timeStamp.innerHTML = new Date(data.timeStamp).toISOString();\n      }\n      window.URL.revokeObjectURL(oldBlobURL);\n  }\n\n  selectDataView(dataSourceIds,entityId) {\n    if(dataSourceIds.indexOf(this.dataSourceId) > -1 || (isDefined(this.entity)) && this.entity.getId() === entityId) {\n      document.getElementById(this.divId).setAttribute(\"class\",this.css+\" \"+this.cssSelected);\n    } else {\n      document.getElementById(this.divId).setAttribute(\"class\",this.css);\n    }\n  }\n\n  reset() {\n      this.imgTag.src = \"\";\n  }\n}\n\nexport default MjpegView;\n","<template>\n    <dialog-drag\n            id=\"drag-window-1\"\n            title=\"Video MJPEG\"\n            class=\"resizable\"\n            :options=\"{ width:350,top:100,left:2 }\">\n        <div id=\"video-container\"></div>\n    </dialog-drag>\n</template>\n\n<script>\nimport DialogDrag from 'vue-dialog-drag';\nimport VideoMjpeg from 'osh/datareceiver/VideoMjpeg.js';\nimport MjpegView from 'osh/ui/view/video/MjpegView.js';\n\nexport default {\n  name: \"Video\",\n  components: {\n    DialogDrag\n  },\n  mounted() {\n\n    // create data source for Android phone camera\n    let videoDataSource = new VideoMjpeg(\"android-Video\", {\n      protocol: \"ws\",\n      service: \"SOS\",\n      endpointUrl: \"sensiasoft.net:8181/sensorhub/sos\",\n      offeringID: \"urn:android:device:060693280a28e015-sos\",\n      observedProperty: \"http://sensorml.com/ont/swe/property/VideoFrame\",\n      startTime: \"2015-02-16T07:58:35Z\",\n      endTime: \"2015-02-16T08:09:00Z\",\n      replaySpeed: 3\n    });\n\n    // show it in video view\n    let videoView = new MjpegView(\"video-container\", {\n      dataSourceId: videoDataSource.id,\n      css: \"video-mjpeg\",\n      name: \"Android Video\",\n      keepRatio: true,\n      showTime: true\n    });\n\n    // start streaming\n    videoDataSource.connect();\n  }\n}\n</script>\n<style src=\"vue-dialog-drag/dist/vue-dialog-drag.css\"></style>\n\n<!-- optional dialog styles, see example -->\n<style scoped>\n  .dialog-drag {\n    z-index: 10;\n  }\n\n  .resizable {\n      resize: both;   /* Options: horizontal, vertical, both */\n  }\n</style>\n\n<style>\n    .dialog-drag {\n        overflow-y: hidden;\n        border: 1px solid #bbbbbb;\n        border-radius: 4px;\n        box-shadow: 0 0 7px #000000;\n    }\n    .dialog-drag .dialog-body {\n        padding:0;\n    }\n\n    .video-mjpeg {\n        width: 100%;\n        margin-bottom:5px;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=62391638&scoped=true&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"vue-dialog-drag/dist/vue-dialog-drag.css?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./Video.vue?vue&type=style&index=1&id=62391638&scoped=true&lang=css&\"\nimport style2 from \"./Video.vue?vue&type=style&index=2&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62391638\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Video />\n    <Map />\n  </div>\n</template>\n<script>\n  // @ is an alias to /src\nimport Map from '@/components/Map.vue';\nimport Video from '@/components/Video.vue';\n\nexport default {\n  components: {\n    Map,\n    Video\n  }\n};\n</script>\n<style>\n  body {\n    overflow-x: hidden;\n    margin:0;\n  }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=62a3edb5&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport LoadScript from 'vue-plugin-load-script';\n\nVue.use(LoadScript);\nVue.config.productionTip = false;\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=2&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=2&lang=css&\""],"sourceRoot":""}