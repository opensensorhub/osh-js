/*! For license information please see chunk-X5RGBNPH.js.LICENSE.txt */
import{a as y,b as P,d as W}from"./chunk-IGBMENRT.js";import{a as L}from"./chunk-SEE54P6A.js";import{a as B}from"./chunk-LU3FCBPP.js";import{b as q}from"./chunk-S2577PU4.js";import{e as T}from"./chunk-2TPVVSVW.js";function Y(t){let a=t._uSquared,i=t._ellipsoid.maximumRadius,n=t._ellipsoid.minimumRadius,e=(i-n)/i,s=Math.cos(t._startHeading),h=Math.sin(t._startHeading),r=(1-e)*Math.tan(t._start.latitude),o=1/Math.sqrt(1+r*r),d=o*r,c=Math.atan2(r,s),u=o*h,l=u*u,M=1-l,_=Math.sqrt(M),g=a/4,p=g*g,f=p*g,m=p*p,q=1+g-3*p/4+5*f/4-175*m/64,P=1-g+15*p/8-35*f/8,v=1-3*g+35*p/4,H=1-5*g,O=q*c-P*Math.sin(2*c)*g/2-v*Math.sin(4*c)*p/16-H*Math.sin(6*c)*f/48-5*Math.sin(8*c)*m/512,S=t._constants;S.a=i,S.b=n,S.f=e,S.cosineHeading=s,S.sineHeading=h,S.tanU=r,S.cosineU=o,S.sineU=d,S.sigma=c,S.sineAlpha=u,S.sineSquaredAlpha=l,S.cosineSquaredAlpha=M,S.cosineAlpha=_,S.u2Over4=g,S.u4Over16=p,S.u6Over64=f,S.u8Over256=m,S.a0=q,S.a1=P,S.a2=v,S.a3=H,S.distanceRatio=O}function Z(t,a){return t*a*(4+t*(4-3*a))/16}function k(t,a,i,n,e,s,h){let r=Z(t,i);return(1-r)*t*a*(n+r*e*(h+r*s*(2*h*h-1)))}function $(t,a,i,n,e,s,h){let r,o,d,c,u,l=(a-i)/a,M=s-n,_=Math.atan((1-l)*Math.tan(e)),g=Math.atan((1-l)*Math.tan(h)),p=Math.cos(_),f=Math.sin(_),m=Math.cos(g),q=Math.sin(g),P=p*m,v=p*q,H=f*q,O=f*m,S=M,E=L.TWO_PI,y=Math.cos(S),b=Math.sin(S);do{y=Math.cos(S),b=Math.sin(S);let t,a=v-O*y;d=Math.sqrt(m*m*b*b+a*a),o=H+P*y,r=Math.atan2(d,o),0===d?(t=0,c=1):(t=P*b/d,c=1-t*t),E=S,u=o-2*H/c,isFinite(u)||(u=0),S=M+k(l,t,c,r,d,o,u)}while(Math.abs(S-E)>L.EPSILON12);let T=c*(a*a-i*i)/(i*i),U=T*(256+T*(T*(74-47*T)-128))/1024,j=u*u,A=i*(1+T*(4096+T*(T*(320-175*T)-768))/16384)*(r-U*d*(u+U*(o*(2*j-1)-U*u*(4*d*d-3)*(4*j-3)/6)/4)),w=Math.atan2(m*b,v-O*y),x=Math.atan2(p*b,v*y-O);t._distance=A,t._startHeading=w,t._endHeading=x,t._uSquared=T}var j=new y,x=new y;function N(t,a,i,n){let e=y.normalize(n.cartographicToCartesian(a,x),j),s=y.normalize(n.cartographicToCartesian(i,x),x);q.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(y.angleBetween(e,s))-Math.PI),.0125),$(t,n.maximumRadius,n.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=P.clone(a,t._start),t._end=P.clone(i,t._end),t._start.height=0,t._end.height=0,Y(t)}function E(t,a,i){let n=B(i,W.WGS84);this._ellipsoid=n,this._start=new P,this._end=new P,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,T(t)&&T(a)&&N(this,t,a,n)}Object.defineProperties(E.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return q.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return q.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return q.defined("distance",this._distance),this._endHeading}}}),E.prototype.setEndPoints=function(t,a){q.defined("start",t),q.defined("end",a),N(this,t,a,this._ellipsoid)},E.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},E.prototype.interpolateUsingSurfaceDistance=function(t,a){q.defined("distance",this._distance);let i=this._constants,n=i.distanceRatio+t/i.b,e=Math.cos(2*n),s=Math.cos(4*n),h=Math.cos(6*n),r=Math.sin(2*n),o=Math.sin(4*n),d=Math.sin(6*n),c=Math.sin(8*n),u=n*n,l=n*u,M=i.u8Over256,_=i.u2Over4,g=i.u6Over64,p=i.u4Over16,f=2*l*M*e/3+n*(1-_+7*p/4-15*g/4+579*M/64-(p-15*g/4+187*M/16)*e-(5*g/4-115*M/16)*s-29*M*h/16)+(_/2-p+71*g/32-85*M/16)*r+(5*p/16-5*g/4+383*M/96)*o-u*((g-11*M/2)*r+5*M*o/2)+(29*g/96-29*M/16)*d+539*M*c/1536,m=Math.asin(Math.sin(f)*i.cosineAlpha),v=Math.atan(i.a/i.b*Math.tan(m));f-=i.sigma;let H=Math.cos(2*i.sigma+f),O=Math.sin(f),S=Math.cos(f),E=i.cosineU*S,y=i.sineU*O,b=Math.atan2(O*i.sineHeading,E-y*i.cosineHeading)-k(i.f,i.sineAlpha,i.cosineSquaredAlpha,f,O,S,H);return T(a)?(a.longitude=this._start.longitude+b,a.latitude=v,a.height=0,a):new P(this._start.longitude+b,v,0)};var ct=E;export{ct as a};